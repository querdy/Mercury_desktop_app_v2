
```
_  _ ____ ___ ____ ____ _ _  _ ____ ____ _   _    ____ _  _ ____ _  _ ___ ____    _  _ ____ _  _ ____ ____ ____ ____ 
|  | |___  |  |___ |__/ | |\ | |__| |__/  \_/     |___ |  | |___ |\ |  |  [__     |\/| |__| |\ | |__| | __ |___ |__/ 
 \/  |___  |  |___ |  \ | | \| |  | |  \   |      |___  \/  |___ | \|  |  ___]    |  | |  | | \| |  | |__] |___ |  \ 
 ```

Приложение для автоматизации рутины при работе с Меркурием.
Работоспособно при наличии аккаунта с правом доступа "Сертефикация высшего ветеринарного риска" (ГВЭ).
Если необходим доступ для аттестованных специалистов - нужно менять url`ы в классе Mercury подправить service_url (/gve/ -> /hs/). Работоспособность не гарантирована, т.к. нет возможности проверить 

ВАЖНО! Программа не использует официальный API по причине того, что в нем не реализована часть функций для ГВЭ (ВСЭ, справки о безопасности молока и т.д.), как следствие производится работа через внутренни API сайта, следовательно приложение может внезапно перестать работать. Если не работает логин - достаточно сменить IP(перезапустить роутер) / удалить файлик cookies.json в корне папки приложения. Зато не нужно получать отдельные реквизиты доступа :)

Функции:
1. внесение лабораторных исследований, иммунизаций/обработок на вырабатываемую продукцию по номеру записи журнала или по номеру транзакции (в транзакциях типа переработка/производство, в т.ч. при незавершенном производстве с исключением повторного внесения исследований на одну запись журнала при многократном запуске)
2. Загрузка исследований, иммунизаций из меркурия с уже имеющихся записей журнала
3. Защита от повторного внесения

#### Как использовать
* Заходим во вкладку "Сервис". Вводим логин и пароль от меркурия. Должно прийти подтверждение входа, в заголовок приложения добавится ваш логин.
![service tab](./images/service%20tab.png)
* Заходим во вкладку "Редактирование". Нажимаем "+ Предприятие" и вводим удобное нам название шаблона и номер предприятия в реестре (можно ввести вместе с RU, можно только цифры). Нажимаем сохранить.
* Выбираем интересующий нас шаблон предприятия. Можем вручную добавить необходимые исследования/иммунизации, можем загрузить их из меркурия. Для загрузки используем кнопку "Загр. иссл. и иммун.", вводим номер записи журнала или номер транзакции (только переработка/производство!!!) с интересующими нас исследованиями/иммунизациями. В случае ввода транзакции загрузятся мероприятия со всех вырабатываемых записей. При загрузке из меркурия мероприятия поместятся в нижнюю таблицу (о таблицах дальше)
![edit tab w dialog](./images/edit%20tab%20with%20download%20dialog.png)
![edit tab](./images/edit%20tab.png)
* Немного о таблицах: для лабораторных исследований предусмотренно 3 таблицы, для иммунизаций 2. Суть не меняется, объяснение будет для лабораторных исследований.
Верхняя таблица (main) - лабораторные исследования, указанные в этой таблице будут вноситься на любую продукцию, которая попадется в транзакции, в которую вы захотите внести исследования. Справа от нее маленькая таблица (не вносятся (main)) - исследования из таблицы main НЕ будут внесены, если в этой таблице указано наименование конкретной продукции. (на примере ниже в транзакции будут внесены лабораторные исследования на всё, кроме жира). Нижняя таблица (Вносятся на указанную продукцию) - исследования из этой таблицы будут вноситься только на продукцию, для которой эти исследования указаны. ВАЖНО! исследования из таблицы main не внесутся, если есть исследования, указанные в нижней таблице (если не стоит галочка, о ней далее)
* После загрузки из меркурия, если вам нужны исследования не для каждого отдельного продукта, а для всех сразу, можно нажать кнопку "Перенести в main" - исследования скопируются с сохранением только уникальных (на скриншоте ниже последствие нажатия этой кнопки)
![edit tab w exc](./images/edit%20tab%20with%20exclude.png)
* Нажимаем кнопку "Сохранить" и переходим во вкладку "Внесение"
![add tab](./images/add%20tab.png)
* На этой вкладке указываем номер записи журнала ИЛИ номер транзакции (только переработка/производство). При необходимости ставим единственную галочку с говорящим лейблом. Выбираем нужный нам шаблон и нажимаем кнопку "Начать". В окне мы увидим информацию о процессе внесения мероприятий. 